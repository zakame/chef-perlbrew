name: Run code linters

on:
  push:
    branches:
    - '**'
    tags-ignore:
    - '*'
  pull_request:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - name: Install Chef Workstation
      run: |
        wget -qO - https://omnitruck.chef.io/install.sh | sudo bash -s -- -P chef-workstation -s once
        chef --version
    - name: Run linters
      env:
        CHEF_LICENSE: accept-no-persist
      run: |
        eval "$(chef shell-init bash)"
        cookstyle --display-cop-names --extra-details
        foodcritic .
